import{c as Ce,A as Se,j as e,C as f,G as b,H as $,I as V,K as y,U as v,S as P,L as K,B as be,r as h,F as ye,E as S}from"./index-a996d77c.js";import{u as F,w as we}from"./xlsx-81fdaaba.js";import{E as Fe}from"./jspdf.plugin.autotable-234c2e89.js";import{S as Z}from"./save-d76e1658.js";import{F as ke}from"./file-spreadsheet-53adb39f.js";import{F as Re}from"./file-text-fee5fbf7.js";import{P as $e}from"./plus-circle-b044468d.js";import{S as Ve}from"./search-9e1431e9.js";import{S as U,a as ee,b as ae,c as se,d as q}from"./select-c1f59cc1.js";import{C as Te}from"./calculator-05e64e1e.js";import{T as oe,a as te,b as R,c as u,d as re,e as g}from"./table-114982be.js";import{A as Ee}from"./alert-circle-e523b1a5.js";import{P as Ae}from"./pen-98cd02d5.js";import{T as Me}from"./trash-2-99337be2.js";import{D as De,a as Oe,b as qe,c as Ke,d as Be,e as ze}from"./dialog-143d4e79.js";import{g as Ie}from"./partesAnimais-e74d50b3.js";import"./component-78adbb4d.js";import"./check-81dc6077.js";import"./Combination-a26b2933.js";const Je=Ce("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]),He=(r,a)=>{const o=F.book_new(),i=r.map(s=>({"Cód. Peça":s.codigo_peca,"Nome da Peça":s.nome_peca,"Parte do Animal":s.nome_parte_animal,"Rendimento (%)":s.rendimento_percentual,"Preço Venda (R$/kg)":s.preco_venda_kg||0})),d=F.json_to_sheet(i);if(F.book_append_sheet(o,d,"Parâmetros Cadastrados"),a&&a.length>0){const s=a.map(n=>({Peça:`${n.nome} (${n.codigo_peca})`,"Peso (kg)":n.peso,"Preço Venda (R$/kg)":n.precoVendaKg,"Valor Peça (R$)":n.valorPeca,"% Peso":n.percentualPeso,"% Venda":n.percentualVenda,"Novo Custo (R$/kg)":n.novoCustoUnitario,"Margem (%)":n.margem})),p=F.json_to_sheet(s);F.book_append_sheet(o,p,"Resultados do Cálculo")}we(o,"parametros_rendimento.xlsx")},Le=(r,a)=>{const o=new Fe,i=[59,130,246],d=[249,250,251];let s=25;o.setFillColor(...i),o.rect(0,0,210,20,"F"),o.setTextColor(255,255,255),o.setFontSize(16),o.setFont("helvetica","bold"),o.text("Relatório de Parâmetros de Rendimento",14,14),o.setFontSize(14),o.setFont("helvetica","bold"),o.setTextColor(0,0,0),o.text("Parâmetros Cadastrados",14,s),s+=7,o.autoTable({startY:s,head:[["Cód. Peça","Nome da Peça","Parte do Animal","Rendimento (%)","Preço Venda (R$/kg)"]],body:r.map(n=>[n.codigo_peca,n.nome_peca,n.nome_parte_animal,n.rendimento_percentual,`R$ ${parseFloat(n.preco_venda_kg||0).toFixed(2)}`]),theme:"grid",headStyles:{fillColor:i,textColor:[255,255,255]},alternateRowStyles:{fillColor:d}}),s=o.lastAutoTable.finalY+15,a&&a.length>0&&(s>250&&(o.addPage(),s=20),o.setFontSize(14),o.setFont("helvetica","bold"),o.text("Resultados do Cálculo de Rendimento",14,s),s+=7,o.autoTable({startY:s,head:[["Peça","Peso (kg)","Preço (R$/kg)","Valor (R$)","% Peso","% Venda","Novo Custo (R$/kg)","Margem (%)"]],body:a.map(n=>[`${n.nome} (${n.codigo_peca})`,n.peso,`R$ ${n.precoVendaKg}`,`R$ ${n.valorPeca}`,n.percentualPeso,n.percentualVenda,`R$ ${n.novoCustoUnitario}`,n.margem]),theme:"grid",headStyles:{fillColor:i,textColor:[255,255,255]},alternateRowStyles:{fillColor:d},styles:{fontSize:8}}));const p=o.internal.getNumberOfPages();for(let n=1;n<=p;n++)o.setPage(n),o.setFontSize(8),o.setTextColor(128,128,128),o.text(`${Se} - Página ${n} de ${p}`,14,285),o.text(`Gerado em: ${new Date().toLocaleString("pt-BR")}`,150,285);o.save("parametros_rendimento.pdf")},Ye=({handleOpenModal:r,handleSaveAll:a,handleExportExcel:o,handleExportPDF:i,isSaving:d,hasChanges:s})=>e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[e.jsx("h1",{className:"text-3xl font-bold text-gradient-brand",children:"Parâmetros de Rendimento"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(f,{onClick:a,disabled:d||!s,children:[e.jsx(Z,{className:"mr-2 h-4 w-4"})," ",d?"Salvando...":"Salvar Preços"]}),e.jsxs(f,{onClick:o,variant:"outline",children:[e.jsx(ke,{className:"mr-2 h-4 w-4"})," Exportar Excel"]}),e.jsxs(f,{onClick:i,variant:"outline",children:[e.jsx(Re,{className:"mr-2 h-4 w-4"})," Exportar PDF"]}),e.jsxs(f,{onClick:()=>r(),className:"whitespace-nowrap",children:[e.jsx($e,{className:"mr-2 h-4 w-4"})," Adicionar Parâmetro"]})]})]}),Ge=({searchTerm:r,setSearchTerm:a,handleSearch:o,isSearching:i})=>e.jsxs(b,{className:"glass-card",children:[e.jsx($,{children:e.jsx(V,{children:"Pesquisar Parâmetros"})}),e.jsxs(y,{className:"flex flex-col sm:flex-row gap-3 items-end",children:[e.jsxs("div",{className:"flex-grow",children:[e.jsx(v,{htmlFor:"searchTermParametros",children:"Código ou Nome da Peça"}),e.jsx(P,{id:"searchTermParametros",type:"text",placeholder:"Ex: 1 ou Alcatra",value:r,onChange:d=>a(d.target.value)})]}),e.jsxs(f,{onClick:o,disabled:i,className:"w-full sm:w-auto",children:[i?e.jsx(K,{className:"mr-2"}):e.jsx(Ve,{className:"mr-2 h-4 w-4"}),"Pesquisar"]})]})]}),We=({pesoBoi:r,setPesoBoi:a,handleCalcular:o,isLoading:i,partesDisponiveis:d,selectedParte:s,setSelectedParte:p})=>e.jsxs(b,{className:"glass-card",children:[e.jsx($,{children:e.jsx(V,{children:"Simular Rendimento"})}),e.jsxs(y,{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[e.jsxs("div",{className:"md:col-span-1",children:[e.jsx(v,{htmlFor:"pesoTotalBoi",children:"Peso Total do Boi (kg)"}),e.jsx(P,{id:"pesoTotalBoi",type:"number",placeholder:"Ex: 250.5",value:r,onChange:n=>a(n.target.value),disabled:i})]}),e.jsxs("div",{className:"md:col-span-1",children:[e.jsx(v,{htmlFor:"parteAnimalFiltro",children:"Filtrar por Parte do Animal"}),e.jsxs(U,{value:s,onValueChange:p,disabled:i,children:[e.jsx(ee,{id:"parteAnimalFiltro",children:e.jsx(ae,{placeholder:"Selecione uma parte..."})}),e.jsxs(se,{children:[e.jsx(q,{value:"todos",children:"Todas as Partes"}),d.map(n=>e.jsx(q,{value:n,children:n},n))]})]})]}),e.jsxs(f,{onClick:o,className:"w-full",disabled:i,children:[e.jsx(Te,{className:"mr-2 h-4 w-4"}),"Calcular Rendimento"]})]})]}),Qe=({resultados:r})=>!r||r.length===0?e.jsx(b,{className:"glass-card",children:e.jsxs(y,{className:"pt-6 text-center text-muted-foreground",children:[e.jsx(Ee,{className:"mx-auto h-12 w-12 mb-4"}),e.jsx("p",{children:"Os resultados do cálculo de rendimento aparecerão aqui."}),e.jsx("p",{className:"text-sm",children:'Preencha o peso do boi e clique em "Calcular".'})]})}):e.jsxs(b,{className:"glass-card",children:[e.jsx($,{children:e.jsx(V,{children:"Resultados do Cálculo de Rendimento"})}),e.jsx(y,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(oe,{children:[e.jsx(te,{children:e.jsxs(R,{children:[e.jsx(u,{children:"Peça"}),e.jsx(u,{className:"text-right",children:"Peso (kg)"}),e.jsx(u,{className:"text-right",children:"Preço Venda (R$/kg)"}),e.jsx(u,{className:"text-right",children:"Valor Peça (R$)"}),e.jsx(u,{className:"text-right",children:"% Peso"}),e.jsx(u,{className:"text-right",children:"% Venda"}),e.jsx(u,{className:"text-right",children:"Novo Custo (R$/kg)"}),e.jsx(u,{className:"text-right",children:"Margem (%)"})]})}),e.jsx(re,{children:r.map((a,o)=>e.jsxs(R,{children:[e.jsxs(g,{className:"font-medium",children:[a.nome," ",e.jsxs("span",{className:"text-muted-foreground",children:["(",a.codigo_peca,")"]})]}),e.jsx(g,{className:"text-right",children:a.peso}),e.jsxs(g,{className:"text-right",children:["R$ ",a.precoVendaKg]}),e.jsxs(g,{className:"text-right",children:["R$ ",a.valorPeca]}),e.jsx(g,{className:"text-right",children:a.percentualPeso}),e.jsx(g,{className:"text-right",children:a.percentualVenda}),e.jsxs(g,{className:"text-right font-semibold text-primary",children:["R$ ",a.novoCustoUnitario]}),e.jsx(g,{className:"text-right font-semibold text-green-500",children:a.margem})]},o))})]})})})]}),Xe=({parametros:r,handleParametroUpdate:a,handleOpenModal:o,handleDeleteParametro:i})=>r.length===0?e.jsx(b,{className:"glass-card text-center py-12",children:e.jsxs(y,{children:[e.jsx(Je,{className:"mx-auto h-16 w-16 text-muted-foreground mb-4"}),e.jsx("p",{className:"text-xl text-muted-foreground",children:"Nenhum parâmetro cadastrado."}),e.jsx("p",{className:"text-sm text-muted-foreground",children:'Clique em "Adicionar Parâmetro" para começar.'})]})}):e.jsxs(b,{className:"glass-card",children:[e.jsx($,{children:e.jsx(V,{children:"Parâmetros Cadastrados"})}),e.jsx(y,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(oe,{children:[e.jsx(te,{children:e.jsxs(R,{children:[e.jsx(u,{children:"Cód. Peça"}),e.jsx(u,{children:"Nome da Peça"}),e.jsx(u,{children:"Parte do Animal"}),e.jsx(u,{className:"text-right",children:"Rendimento (%)"}),e.jsx(u,{children:"Preço Venda (R$/kg)"}),e.jsx(u,{className:"text-right",children:"Ações"})]})}),e.jsx(re,{children:r.map(d=>e.jsxs(R,{children:[e.jsx(g,{children:d.codigo_peca}),e.jsx(g,{className:"font-medium",children:d.nome_peca}),e.jsx(g,{children:d.nome_parte_animal}),e.jsx(g,{className:"text-right",children:d.rendimento_percentual}),e.jsx(g,{children:e.jsx(P,{type:"number",step:"0.01",value:d.preco_venda_kg||"",onChange:s=>a(d.id,"preco_venda_kg",s.target.value),placeholder:"R$ 0.00",className:"min-w-[120px]"})}),e.jsx(g,{className:"text-right",children:e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(f,{variant:"outline",size:"icon",onClick:()=>o(d),children:e.jsx(Ae,{className:"h-4 w-4"})}),e.jsx(f,{variant:"destructive",size:"icon",onClick:()=>i(d.id),children:e.jsx(Me,{className:"h-4 w-4"})})]})})]},d.id))})]})})})]}),Ze=({modalOpen:r,setModalOpen:a,currentParametro:o,handleParametroChange:i,handleSaveParametro:d,isSaving:s})=>{if(!r||!o)return null;const p=Ie("bovino"),n=m=>{const N=p.find(j=>j.value===m);i("nome_parte_animal",N?N.label:""),i("codigo_parte_animal",m)};return e.jsx(De,{open:r,onOpenChange:a,children:e.jsxs(Oe,{className:"sm:max-w-lg glass-card",children:[e.jsxs(qe,{children:[e.jsx(Ke,{children:o.id&&!String(o.id).startsWith("new_")?"Editar Parâmetro":"Adicionar Novo Parâmetro"}),e.jsx(Be,{children:"Defina os detalhes do parâmetro de rendimento."})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 py-4",children:[e.jsxs("div",{children:[e.jsx(v,{htmlFor:"codigoPecaModal",children:"Código da Peça"}),e.jsx(P,{id:"codigoPecaModal",type:"number",placeholder:"Ex: 1001",value:o.codigo_peca,onChange:m=>i("codigo_peca",m.target.value),disabled:s})]}),e.jsxs("div",{children:[e.jsx(v,{htmlFor:"nomePecaModal",children:"Nome da Peça"}),e.jsx(P,{id:"nomePecaModal",placeholder:"Ex: Alcatra",value:o.nome_peca,onChange:m=>i("nome_peca",m.target.value),disabled:s})]}),e.jsxs("div",{children:[e.jsx(v,{htmlFor:"parteAnimalModal",children:"Parte do Animal"}),e.jsxs(U,{value:String(o.codigo_parte_animal||""),onValueChange:n,disabled:s,children:[e.jsx(ee,{id:"parteAnimalModal",children:e.jsx(ae,{placeholder:"Selecione a parte"})}),e.jsx(se,{children:p.map(m=>e.jsxs(q,{value:m.value,children:[m.label," (Cód: ",m.value,")"]},m.value))})]})]}),e.jsxs("div",{children:[e.jsx(v,{htmlFor:"rendimentoPercentualModal",children:"Rendimento (%)"}),e.jsx(P,{id:"rendimentoPercentualModal",type:"number",step:"0.01",placeholder:"Ex: 3.50",value:o.rendimento_percentual,onChange:m=>i("rendimento_percentual",m.target.value),disabled:s})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx(v,{htmlFor:"precoVendaKgModal",children:"Preço de Venda (R$/kg)"}),e.jsx(P,{id:"precoVendaKgModal",type:"number",step:"0.01",placeholder:"Ex: 45.90",value:o.preco_venda_kg||"",onChange:m=>i("preco_venda_kg",m.target.value),disabled:s})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx(v,{htmlFor:"descricaoPecaModal",children:"Descrição da Peça (opcional)"}),e.jsx(P,{id:"descricaoPecaModal",placeholder:"Ex: Parte traseira nobre",value:o.descricao_peca||"",onChange:m=>i("descricao_peca",m.target.value),disabled:s})]})]}),e.jsxs(ze,{children:[e.jsx(f,{variant:"outline",onClick:()=>a(!1),disabled:s,children:"Cancelar"}),e.jsxs(f,{onClick:d,disabled:s,children:[s?e.jsx(K,{className:"mr-2"}):e.jsx(Z,{className:"mr-2 h-4 w-4"}),"Salvar Parâmetro"]})]})]})})},Ue=(r,a)=>{const o=r.map(s=>{const p=parseFloat(s.rendimento_percentual)/100*a;return{...s,peso:p,precoVendaKg:parseFloat(s.preco_venda_kg)||0}}),i=o.reduce((s,p)=>s+p.peso,0);if(i===0)return[];const d=o.reduce((s,p)=>s+p.peso*p.precoVendaKg,0);return o.map(s=>{const p=s.peso*s.precoVendaKg,n=i>0?s.peso/i:0,m=d>0?p/d:0,N=(1-m)*p,j=s.peso>0?N/s.peso:0,T=s.precoVendaKg>0?(s.precoVendaKg-j)/s.precoVendaKg:0;return{codigo_peca:s.codigo_peca,nome:s.nome_peca,parte:s.nome_parte_animal,peso:s.peso.toFixed(3),precoVendaKg:s.precoVendaKg.toFixed(2),valorPeca:p.toFixed(2),percentualPeso:(n*100).toFixed(2)+"%",percentualVenda:(m*100).toFixed(2)+"%",novoCustoUnitario:j.toFixed(2),margem:(T*100).toFixed(2)+"%"}})},Na=()=>{const{toast:r}=be(),[a,o]=h.useState(null),[i,d]=h.useState([]),[s,p]=h.useState([]),[n,m]=h.useState(!0),[N,j]=h.useState(!1),[T,E]=h.useState(!1),[B,z]=h.useState(null),[w,ne]=h.useState(""),[I,J]=h.useState(!1),[H,ie]=h.useState(""),[A,L]=h.useState([]),[M,le]=h.useState("todos"),Y=h.useMemo(()=>JSON.stringify(i)!==JSON.stringify(s),[i,s]),ce=h.useCallback(()=>({id:`new_${Date.now()}`,codigo_peca:"",nome_peca:"",codigo_parte_animal:"",nome_parte_animal:"",rendimento_percentual:"",descricao_peca:"",preco_venda_kg:"",user_id:(a==null?void 0:a.id)||null,cnpj_empresa:(a==null?void 0:a.cnpj)||""}),[a]);h.useEffect(()=>{const t=localStorage.getItem(ye);if(t){const l=JSON.parse(t);o(l),l!=null&&l.id&&(l!=null&&l.cnpj)?D(l):m(!1)}else m(!1)},[]);const D=h.useCallback(async t=>{if(!(!(t!=null&&t.id)||!(t!=null&&t.cnpj))){m(!0);try{const{data:l,error:c}=await S.from("parametros_rendimento_boi").select("*").eq("user_id",t.id).eq("cnpj_empresa",t.cnpj).order("codigo_peca",{ascending:!0});if(c)throw c;const x=l||[];d(x),p(JSON.parse(JSON.stringify(x)))}catch(l){r({title:"Erro ao Carregar Parâmetros",description:l.message,variant:"destructive"})}finally{m(!1)}}},[r]),G=(t=null)=>{z(t?{...t,rendimento_percentual:String(t.rendimento_percentual||""),preco_venda_kg:String(t.preco_venda_kg||"")}:ce()),E(!0)},de=(t,l)=>{z(c=>({...c,[t]:l}))},me=async()=>{const{id:t,codigo_peca:l,nome_peca:c,codigo_parte_animal:x,nome_parte_animal:C,rendimento_percentual:W,descricao_peca:ve,preco_venda_kg:Q}=B;if(!l||!c||!W||!x){r({title:"Erro de Validação",description:"Código, Nome, Rendimento e Parte do Animal são obrigatórios.",variant:"destructive"});return}if(!(a!=null&&a.id)||!(a!=null&&a.cnpj)){r({title:"Erro de Autenticação",description:"Não foi possível identificar o usuário ou a empresa.",variant:"destructive"});return}j(!0);const O=parseFloat(W),Ne=Q?parseFloat(Q):null;if(isNaN(O)){r({title:"Erro de Validação",description:"O valor do rendimento é inválido.",variant:"destructive"}),j(!1);return}const X={user_id:a.id,cnpj_empresa:a.cnpj,codigo_peca:parseInt(l,10),nome_peca:c,codigo_parte_animal:String(x),nome_parte_animal:C,rendimento_percentual:O,percentual_rendimento_esperado:O,descricao_peca:ve||null,preco_venda_kg:Ne};try{let _;if(t&&!String(t).startsWith("new_")){const{user_id:ea,cnpj_empresa:aa,...Pe}=X;_=await S.from("parametros_rendimento_boi").update(Pe).match({id:t,user_id:a.id})}else _=await S.from("parametros_rendimento_boi").insert([X]);const{error:k}=_;if(k)throw k;await D(a),r({title:"Sucesso!",description:`Parâmetro "${c}" foi salvo.`}),E(!1)}catch(_){console.error("Erro detalhado ao salvar parâmetro:",_);const k=_.details||(_.code?`Código ${_.code}: ${_.message}`:_.message);r({title:"Falha ao Salvar",description:`Não foi possível salvar o parâmetro. Detalhe: ${k}`,variant:"destructive"})}finally{j(!1)}},pe=async()=>{if(!Y){r({title:"Nenhuma alteração",description:"Nenhuma alteração foi detectada para salvar."});return}j(!0);try{const t=i.filter(c=>{const x=s.find(C=>C.id===c.id);return x&&JSON.stringify(c)!==JSON.stringify(x)}).map(c=>({id:c.id,user_id:c.user_id||a.id,cnpj_empresa:c.cnpj_empresa||a.cnpj,codigo_peca:c.codigo_peca,nome_peca:c.nome_peca,rendimento_percentual:parseFloat(c.rendimento_percentual),percentual_rendimento_esperado:parseFloat(c.percentual_rendimento_esperado||c.rendimento_percentual),codigo_parte_animal:c.codigo_parte_animal,nome_parte_animal:c.nome_parte_animal,descricao_peca:c.descricao_peca,preco_venda_kg:c.preco_venda_kg?parseFloat(c.preco_venda_kg):null}));if(t.length===0){r({title:"Nenhuma alteração detectada",description:"Nenhum preço foi alterado."}),j(!1);return}const{error:l}=await S.from("parametros_rendimento_boi").upsert(t,{onConflict:"id"});if(l)throw l;p(JSON.parse(JSON.stringify(i))),r({title:"Sucesso!",description:"Todas as alterações foram salvas."})}catch(t){r({title:"Erro ao Salvar Preços",description:t.message,variant:"destructive"})}finally{j(!1)}},xe=async t=>{if(!(!t||!(a!=null&&a.id)||!window.confirm("Tem certeza que deseja remover este parâmetro?"))){j(!0);try{const{error:l}=await S.from("parametros_rendimento_boi").delete().match({id:t,user_id:a.id});if(l)throw l;await D(a),r({title:"Sucesso",description:"Parâmetro removido."})}catch(l){r({title:"Erro ao Remover",description:l.message,variant:"destructive"})}finally{j(!1)}}},he=async()=>{if(!(!(a!=null&&a.id)||!(a!=null&&a.cnpj))){J(!0);try{let t=S.from("parametros_rendimento_boi").select("*").eq("user_id",a.id).eq("cnpj_empresa",a.cnpj).order("codigo_peca",{ascending:!0});w.trim()&&(!isNaN(w)?t=t.eq("codigo_peca",parseInt(w)):t=t.ilike("nome_peca",`%${w}%`));const{data:l,error:c}=await t.limit(20);if(c)throw c;d(l||[]),p(JSON.parse(JSON.stringify(l||[]))),r({title:"Busca Concluída",description:`${(l==null?void 0:l.length)||0} parâmetro(s) encontrado(s).`})}catch(t){r({title:"Erro na Busca",description:t.message,variant:"destructive"})}finally{J(!1)}}},ue=(t,l,c)=>{d(x=>x.map(C=>C.id===t?{...C,[l]:c}:C))},ge=()=>{const t=parseFloat(H);if(isNaN(t)||t<=0){r({title:"Erro",description:"Por favor, insira um peso válido para o boi.",variant:"destructive"});return}const l=M==="todos"?i:i.filter(x=>x.nome_parte_animal===M);if(l.length===0){r({title:"Aviso",description:"Nenhum parâmetro encontrado para a parte selecionada.",variant:"destructive"}),L([]);return}if(l.some(x=>x.preco_venda_kg&&(isNaN(parseFloat(x.preco_venda_kg))||parseFloat(x.preco_venda_kg)<0))){r({title:"Erro",description:"Verifique se todos os preços de venda são números válidos e não negativos.",variant:"destructive"});return}const c=Ue(l,t);L(c),r({title:"Cálculo Realizado",description:"Os resultados foram atualizados abaixo."})},je=()=>{He(i,A),r({title:"Exportação Iniciada",description:"Seu arquivo Excel está sendo gerado."})},_e=()=>{Le(i,A),r({title:"Exportação Iniciada",description:"Seu arquivo PDF está sendo gerado."})},fe=[...new Set(i.map(t=>t.nome_parte_animal).filter(Boolean))];return n?e.jsxs("div",{className:"flex justify-center items-center h-64",children:[e.jsx(K,{size:48}),e.jsx("p",{className:"ml-3",children:"Carregando..."})]}):a?e.jsxs("div",{className:"space-y-6",children:[e.jsx(Ye,{handleOpenModal:G,handleSaveAll:pe,handleExportExcel:je,handleExportPDF:_e,isSaving:N,hasChanges:Y}),e.jsx(Ge,{searchTerm:w,setSearchTerm:ne,handleSearch:he,isSearching:I}),e.jsx(Xe,{parametros:i,handleParametroUpdate:ue,handleOpenModal:G,handleDeleteParametro:xe}),e.jsx(We,{pesoBoi:H,setPesoBoi:ie,handleCalcular:ge,isLoading:N||I,partesDisponiveis:fe,selectedParte:M,setSelectedParte:le}),e.jsx(Qe,{resultados:A}),e.jsx(Ze,{modalOpen:T,setModalOpen:E,currentParametro:B,handleParametroChange:de,handleSaveParametro:me,isSaving:N})]}):e.jsx("div",{className:"text-center py-10",children:e.jsx("p",{className:"text-red-500",children:"Usuário não autenticado."})})};export{Na as default};
