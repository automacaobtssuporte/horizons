import{c as ue,j as e,G as M,H as z,I as O,K as q,U as $,S as T,B as pe,r as C,V as re,W as le,Y as ie,Z as ne,M as Ye,C as w,L as ce,J as Ze,F as Ge,A as me,E as je}from"./index-a996d77c.js";import{S as fe,a as ve,b as Ce,c as Ne,d as te}from"./select-c1f59cc1.js";import{t as Je,g as Qe}from"./partesAnimais-e74d50b3.js";import{D as Fe,a as Se,b as we,c as Re,d as Ae,e as ke}from"./dialog-143d4e79.js";import{P as Xe}from"./plus-6598b712.js";import{T as $e}from"./trash-2-99337be2.js";import{B as ea}from"./badge-623d0f21.js";import{C as Ee}from"./calculator-05e64e1e.js";import{D as aa}from"./dollar-sign-0ce09540.js";import{T as De}from"./trending-up-62c7af95.js";import{T as sa}from"./trending-down-500a800d.js";import{D as Le}from"./download-e041ef9d.js";import{B as ye}from"./bar-chart-3-b9a99bf5.js";import{u as S,w as Ve,r as ta}from"./xlsx-81fdaaba.js";import{E as oa}from"./jspdf.plugin.autotable-234c2e89.js";import{S as ra}from"./save-d76e1658.js";import{F as la}from"./file-text-fee5fbf7.js";import{S as ia}from"./search-9e1431e9.js";import{P as na}from"./plus-circle-b044468d.js";import"./component-78adbb4d.js";import"./check-81dc6077.js";import"./Combination-a26b2933.js";const ca=ue("Bone",[["path",{d:"M17 10c.7-.7 1.69 0 2.5 0a2.5 2.5 0 1 0 0-5 .5.5 0 0 1-.5-.5 2.5 2.5 0 1 0-5 0c0 .81.7 1.8 0 2.5l-7 7c-.7.7-1.69 0-2.5 0a2.5 2.5 0 0 0 0 5c.28 0 .5.22.5.5a2.5 2.5 0 1 0 5 0c0-.81-.7-1.8 0-2.5Z",key:"w610uw"}]]),da=ue("FilePlus",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"12",x2:"12",y1:"18",y2:"12",key:"1tsf04"}],["line",{x1:"9",x2:"15",y1:"15",y2:"15",key:"110plj"}]]),de=ue("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),ma=ue("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]),ua=({numeroNotaFiscal:l,setNumeroNotaFiscal:s,dataChegada:b,setDataChegada:t,pesoInicialBoi:h,setPesoInicialBoi:g,custoTotalCarcaça:n,setCustoTotalCarcaça:o,tipoAnimal:r,setTipoAnimal:c})=>{const v=`Peso Inicial ${r==="suino"?"Suíno":"Bovino"} (kg)`;return e.jsxs(M,{className:"glass-card",children:[e.jsx(z,{children:e.jsx(O,{children:"Dados da Carcaça"})}),e.jsxs(q,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx($,{htmlFor:"tipoAnimal",children:"Tipo de Animal"}),e.jsxs(fe,{value:r||"bovino",onValueChange:c,children:[e.jsx(ve,{children:e.jsx(Ce,{placeholder:"Selecione o tipo"})}),e.jsx(Ne,{children:Je.map(u=>e.jsx(te,{value:u.value,children:u.label},u.value))})]})]}),e.jsxs("div",{children:[e.jsx($,{htmlFor:"numeroNotaFiscal",children:"Número da Nota Fiscal"}),e.jsx(T,{id:"numeroNotaFiscal",type:"text",placeholder:"Ex: 12345",value:l,onChange:u=>s(u.target.value)})]}),e.jsxs("div",{children:[e.jsx($,{htmlFor:"dataChegada",children:"Data de Chegada"}),e.jsx(T,{id:"dataChegada",type:"date",value:b,onChange:u=>t(u.target.value)})]}),e.jsxs("div",{children:[e.jsx($,{htmlFor:"pesoInicialBoi",children:v}),e.jsx(T,{id:"pesoInicialBoi",type:"number",step:"0.01",placeholder:"Ex: 250.5",value:h,onChange:u=>g(u.target.value)})]}),e.jsxs("div",{children:[e.jsx($,{htmlFor:"custoTotalCarcaça",children:"Custo Total da Carcaça (R$)"}),e.jsx(T,{id:"custoTotalCarcaça",type:"number",step:"0.01",placeholder:"Ex: 1500.00",value:n,onChange:u=>o(u.target.value)})]})]})]})},pa=({cortes:l,handleCorteChange:s,handleRemoveCorte:b,tipoAnimal:t="bovino"})=>{const{toast:h}=pe(),[g,n]=C.useState(!1),[o,r]=C.useState(""),[c,j]=C.useState(""),v=Qe(t),u=t==="suino"?"Suíno":"Boi",N=()=>{if(!o.trim()){h({title:"Erro",description:"Nome da parte é obrigatório.",variant:"destructive"});return}if(v.find(x=>x.value.toLowerCase()===o.toLowerCase()||x.label.toLowerCase()===o.toLowerCase())){h({title:"Parte já existe",description:"Esta parte já está disponível na lista.",variant:"destructive"});return}const p={value:o.toLowerCase().replace(/\s+/g,"_"),label:c||o};v.push(p),h({title:"Parte Adicionada",description:`"${p.label}" foi adicionada às opções disponíveis.`,duration:5e3}),r(""),j(""),n(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"hidden md:grid md:grid-cols-11 gap-2 mb-2 text-sm font-medium text-muted-foreground px-3",children:[e.jsx("span",{children:"Cód. Produto"}),e.jsx("span",{children:"Nome"}),e.jsx("span",{children:"Peso (kg)"}),e.jsx("span",{children:"Preço Venda (R$/kg)"}),e.jsxs("span",{children:["Parte do ",u]}),e.jsxs("span",{className:"flex items-center",children:["Índice Venda",e.jsx(re,{children:e.jsxs(le,{children:[e.jsx(ie,{asChild:!0,children:e.jsx(de,{className:"h-3 w-3 ml-1 text-blue-500 cursor-help"})}),e.jsx(ne,{className:"bg-gray-800 text-white p-2 rounded text-xs max-w-xs",children:e.jsx("p",{children:"Fórmula: (Preço Venda * Peso) / Receita Total"})})]})})]}),e.jsxs("span",{className:"text-green-600 font-semibold flex items-center",children:["Custo Total (R$)",e.jsx(re,{children:e.jsxs(le,{children:[e.jsx(ie,{asChild:!0,children:e.jsx(de,{className:"h-3 w-3 ml-1 text-blue-500 cursor-help"})}),e.jsx(ne,{className:"bg-gray-800 text-white p-2 rounded text-xs max-w-xs",children:e.jsx("p",{children:"Fórmula: Índice Venda * Custo Total Carcaça"})})]})})]}),e.jsxs("span",{className:"text-green-600 font-semibold flex items-center",children:["Custo (R$/kg)",e.jsx(re,{children:e.jsxs(le,{children:[e.jsx(ie,{asChild:!0,children:e.jsx(de,{className:"h-3 w-3 ml-1 text-blue-500 cursor-help"})}),e.jsx(ne,{className:"bg-gray-800 text-white p-2 rounded text-xs max-w-xs",children:e.jsx("p",{children:"Fórmula: Custo Total Peça / Peso Peça"})})]})})]}),e.jsx("span",{children:"Margem (%)"}),e.jsx("span",{children:"Ações"})]}),l.map(a=>e.jsxs(Ye.div,{className:"grid grid-cols-2 md:grid-cols-11 gap-2 mb-3 p-3 border rounded-lg items-center bg-background/30 shadow-sm",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:[e.jsx(T,{placeholder:"Cód.",value:a.codigo_produto||"",onChange:p=>s(a.id,"codigo_produto",p.target.value),className:"col-span-2 md:col-span-1"}),e.jsx(T,{placeholder:"Nome",value:a.nome||"",onChange:p=>s(a.id,"nome",p.target.value),className:"col-span-2 md:col-span-1"}),e.jsx(T,{type:"number",placeholder:"Peso",value:a.peso||"",onChange:p=>s(a.id,"peso",p.target.value),className:"col-span-1"}),e.jsx(T,{type:"number",placeholder:"Preço Venda",value:a.preco_venda_kg||"",onChange:p=>s(a.id,"preco_venda_kg",p.target.value),className:"col-span-1",disabled:a.parte_animal==="descarte"||a.parte_boi==="descarte",title:a.parte_animal==="descarte"||a.parte_boi==="descarte"?"Preço de venda é R$ 0 para Descarte":""}),e.jsxs("div",{className:"col-span-2 md:col-span-1 flex gap-1",children:[e.jsxs(fe,{value:a.parte_animal||a.parte_boi||"",onValueChange:p=>{s(a.id,"parte_animal",p),s(a.id,"parte_boi",p),p==="descarte"&&s(a.id,"preco_venda_kg","0")},children:[e.jsx(ve,{className:"flex-1",children:e.jsx(Ce,{placeholder:"Selecione"})}),e.jsx(Ne,{children:v.map(p=>e.jsx(te,{value:p.value,children:p.label},p.value))})]}),e.jsx(w,{variant:"outline",size:"sm",onClick:()=>n(!0),className:"px-2",title:"Adicionar nova parte",children:e.jsx(Xe,{className:"h-3 w-3"})})]}),e.jsx(T,{type:"text",value:a.indiceVenda||"0.00%",readOnly:!0,disabled:!0,title:"Índice de Venda",className:"bg-muted/50 col-span-1"}),e.jsx(T,{type:"text",value:a.novoCustoTotal||"0.00",readOnly:!0,disabled:!0,title:"Custo Total da Peça (R$)",className:"bg-green-500/20 font-semibold text-green-700 col-span-1"}),e.jsx(T,{type:"text",value:a.novoCustoKg||"0.00",readOnly:!0,disabled:!0,title:"Novo Custo (R$/kg) - Rateado",className:"bg-green-500/20 font-semibold text-green-700 col-span-1"}),e.jsx(T,{type:"text",value:a.margem||"0.00%",readOnly:!0,disabled:!0,title:"Margem de Lucro (%)",className:"bg-muted/50 col-span-1"}),e.jsx("div",{className:"flex flex-col items-stretch gap-1 col-span-2 md:col-span-1",children:e.jsx(w,{variant:"destructive",onClick:()=>b(a.id),size:"sm",className:"w-full",children:e.jsx($e,{className:"h-4 w-4"})})})]},a.id)),e.jsx(Fe,{open:g,onOpenChange:n,children:e.jsxs(Se,{className:"sm:max-w-md glass-card",children:[e.jsxs(we,{children:[e.jsxs(Re,{children:["Adicionar Nova Parte do ",u]}),e.jsx(Ae,{children:"Adicione uma nova parte que não está na lista padrão."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{children:[e.jsx($,{htmlFor:"novaParteNome",children:"Nome da Parte (obrigatório)"}),e.jsx(T,{id:"novaParteNome",placeholder:"Ex: Cupim, Fraldinha, etc.",value:o,onChange:a=>r(a.target.value)})]}),e.jsxs("div",{children:[e.jsx($,{htmlFor:"novaParteDescricao",children:"Descrição (opcional)"}),e.jsx(T,{id:"novaParteDescricao",placeholder:"Descrição mais detalhada...",value:c,onChange:a=>j(a.target.value)})]})]}),e.jsxs(ke,{children:[e.jsx(w,{variant:"outline",onClick:()=>n(!1),children:"Cancelar"}),e.jsx(w,{onClick:N,children:"Adicionar Parte"})]})]})})]})},xa=({rendimentoTotal:l,custoVerificado:s,receitaTotal:b,lucroEstimado:t,totalDescarte:h})=>{const g=parseFloat(l)||0,n=parseFloat(s)||0,o=parseFloat(b)||0,r=parseFloat(t)||0,c=parseFloat(h)||0,j=o>0?r/o*100:0,v=a=>a>=70?"text-green-600":a>=60?"text-yellow-600":"text-red-600",u=a=>a>0?"text-green-600":a===0?"text-yellow-600":"text-red-600",N=a=>a>=20?"bg-green-100 text-green-800":a>=10?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800";return e.jsxs(M,{className:"glass-card",children:[e.jsxs(z,{children:[e.jsxs(O,{className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"h-5 w-5 text-primary"}),"Resultados Consolidados da Desossa"]}),e.jsx(re,{children:e.jsxs(le,{children:[e.jsx(ie,{asChild:!0,children:e.jsxs("div",{className:"text-sm text-muted-foreground space-y-1 mt-2 cursor-help flex items-center",children:[e.jsx(de,{className:"h-4 w-4 mr-2 text-blue-500"}),e.jsx("span",{children:"Hover para detalhes da nova fórmula de custo (rateio por venda)"})]})}),e.jsxs(ne,{className:"bg-gray-800 text-white p-3 rounded-md shadow-lg max-w-xs",children:[e.jsx("p",{className:"font-bold mb-2",children:"Nova Fórmula de Custo por Rateio:"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-sm",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Índice de Venda:"})," (Preço Venda × Peso) / Receita Total"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Custo Total Peça (R$):"})," Índice de Venda × Custo Total Carcaça"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Novo Custo (R$/kg):"})," Custo Total Peça / Peso da Peça"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Margem %:"})," (Preço Venda/kg - Novo Custo/kg) / Preço Venda/kg"]})]})]})]})})]}),e.jsx(q,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-600",children:"Rendimento Total"}),e.jsxs("p",{className:`text-2xl font-bold ${v(g)}`,children:[g.toFixed(2),"%"]})]}),e.jsx(ma,{className:"h-8 w-8 text-blue-500"})]}),e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:g>=70?"Excelente":g>=60?"Bom":"Atenção"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 p-4 rounded-lg border border-purple-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-purple-600",children:"Custo Total Verificado"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-700",children:["R$ ",n.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),e.jsx(aa,{className:"h-8 w-8 text-purple-500"})]}),e.jsx("p",{className:"text-xs text-purple-600 mt-1",children:"Soma dos custos das peças"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 p-4 rounded-lg border border-green-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-600",children:"Receita Total"}),e.jsxs("p",{className:"text-2xl font-bold text-green-700",children:["R$ ",o.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),e.jsx(De,{className:"h-8 w-8 text-green-500"})]}),e.jsx("p",{className:"text-xs text-green-600 mt-1",children:"Receita estimada dos cortes"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 p-4 rounded-lg border border-orange-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-orange-600",children:"Lucro Estimado"}),e.jsxs("p",{className:`text-2xl font-bold ${u(r)}`,children:["R$ ",r.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),r>=0?e.jsx(De,{className:"h-8 w-8 text-green-500"}):e.jsx(sa,{className:"h-8 w-8 text-red-500"})]}),e.jsxs(ea,{className:N(j),children:[j.toFixed(1),"% margem"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 p-4 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Custo Descarte"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-700",children:["R$ ",c.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),e.jsx($e,{className:"h-8 w-8 text-gray-500"})]}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Custo não recuperável (ossos, etc.)"})]})]})})]})},ha=({open:l,setOpen:s,results:b,isLoading:t,searchTerm:h,loadDesossaToForm:g})=>e.jsx(Fe,{open:l,onOpenChange:s,children:e.jsxs(Se,{className:"sm:max-w-lg md:max-w-2xl lg:max-w-4xl glass-card max-h-[80vh] flex flex-col",children:[e.jsxs(we,{children:[e.jsx(Re,{children:"Resultados da Pesquisa de Desossas"}),e.jsx(Ae,{children:"Selecione uma desossa para carregar os dados no formulário."})]}),e.jsx("div",{className:"flex-grow overflow-y-auto space-y-3 pr-2",children:t&&b.length===0?e.jsxs("div",{className:"flex justify-center items-center py-8",children:[e.jsx(ce,{size:32})," ",e.jsx("p",{className:"ml-2",children:"Buscando..."})]}):b.length===0?e.jsxs("p",{className:"text-muted-foreground text-center py-8",children:['Nenhuma desossa encontrada para "',h,'".']}):b.map(n=>{var o,r,c;return e.jsxs(M,{className:"hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>g(n),children:[e.jsxs(z,{children:[e.jsxs(O,{className:"text-lg",children:["NF: ",n.numero_nota_fiscal||"N/A"]}),e.jsxs(Ze,{children:["Data: ",n.data_chegada?new Date(n.data_chegada+"T00:00:00").toLocaleDateString("pt-BR"):"N/A"," | Peso Inicial: ",n.peso_inicial_boi," kg | Custo Carcaça: R$ ",n.custo_total_carcaca]})]}),e.jsxs(q,{children:[e.jsxs("p",{className:"text-sm",children:["Cortes Registrados: ",((o=n.cortes_info)==null?void 0:o.length)||0]}),e.jsxs("p",{className:"text-sm",children:["Lucro Estimado: ",e.jsxs("span",{className:`font-semibold ${parseFloat(((r=n.resultados_consolidados)==null?void 0:r.lucroTotalEstimado)||0)>=0?"text-green-600":"text-red-600"}`,children:["R$ ",((c=n.resultados_consolidados)==null?void 0:c.lucroTotalEstimado)||"0.00"]})]})]})]},n.id)})}),e.jsx(ke,{children:e.jsx(w,{variant:"outline",onClick:()=>s(!1),children:"Fechar"})})]})}),ga=({onDownloadModelo:l,onFileUpload:s})=>e.jsxs(M,{className:"glass-card",children:[e.jsx(z,{children:e.jsx(O,{children:"Importar Cortes de Planilha"})}),e.jsxs(q,{className:"space-y-3",children:[e.jsxs(w,{onClick:l,variant:"outline",className:"w-full",children:[e.jsx(Le,{className:"mr-2 h-4 w-4"})," Baixar Planilha Modelo"]}),e.jsxs("div",{children:[e.jsx($,{htmlFor:"uploadPlanilhaDesossa",children:"Carregar Planilha (.xlsx)"}),e.jsx(T,{id:"uploadPlanilhaDesossa",type:"file",accept:".xlsx, .xls",onChange:s})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Use o modelo para garantir a formatação correta."})]})]}),ja=({dadosAnalise:l})=>{const[s,b]=C.useState("todos");if(!l||l.length===0)return null;const t=o=>({dianteiro:"Dianteiro",traseiro:"Traseiro",serrote:"Serrote",boi_inteiro:"Boi Inteiro",ponta_de_agulha:"Ponta de Agulha",costela:"Costela",pernil:"Pernil",paleta:"Paleta",lombo:"Lombo",costela_suino:"Costela Suíno",panceta:"Panceta (Barriga)",copa:"Copa",papada:"Papada",pé:"Pé",rabo:"Rabo",suino_inteiro:"Suíno Inteiro",descarte:"Descarte",outro:"Outro",nao_definida:"Não Definida"})[o.toLowerCase()]||o,h=o=>["dianteiro","traseiro","serrote","boi_inteiro","ponta_de_agulha","costela"].includes(o.toLowerCase()),g=o=>["pernil","paleta","lombo","costela_suino","panceta","copa","papada","pé","rabo","suino_inteiro"].includes(o.toLowerCase()),n=l.filter(o=>s==="todos"?!0:s==="bovino"?h(o.nome)||!h(o.nome)&&!g(o.nome):s==="suino"?g(o.nome):!0);return e.jsxs(M,{className:"glass-card",children:[e.jsxs(z,{children:[e.jsxs(O,{className:"flex items-center text-xl",children:[e.jsx(ye,{className:"mr-3 h-6 w-6 text-primary"}),"Análise de Lucratividade por Parte"]}),e.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[e.jsx($,{htmlFor:"tipoAnimalFiltro",children:"Filtrar por Tipo de Animal:"}),e.jsxs(fe,{value:s,onValueChange:b,children:[e.jsx(ve,{className:"w-48",children:e.jsx(Ce,{placeholder:"Selecione o tipo"})}),e.jsxs(Ne,{children:[e.jsx(te,{value:"todos",children:"Todos os Tipos"}),e.jsx(te,{value:"bovino",children:"Apenas Bovino"}),e.jsx(te,{value:"suino",children:"Apenas Suíno"})]})]})]})]}),e.jsxs(q,{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:n.map(o=>{const r=parseFloat(o.lucroPrejuizo),c=r>=0,j=c?"text-green-500":"text-red-500",v=c?"bg-green-500/10":"bg-red-500/10",u=o.nome==="descarte"?ca:ye;let N="text-indigo-500";return h(o.nome)?N="text-blue-600":g(o.nome)?N="text-pink-600":o.nome==="descarte"&&(N="text-gray-500"),e.jsxs(M,{className:`shadow-md hover:shadow-lg transition-shadow duration-300 ${v}`,children:[e.jsx(z,{className:"pb-2",children:e.jsxs(O,{className:"text-lg flex items-center",children:[e.jsx(u,{className:`mr-2 h-5 w-5 ${N}`}),t(o.nome)]})}),e.jsxs(q,{className:"text-sm space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Peso Total:"})," ",o.pesoTotal," kg (",o.itens," ",o.itens===1?"corte":"cortes",")"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Receita:"})," R$ ",o.receitaTotal]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Custo:"})," R$ ",o.custoTotal]}),e.jsxs("p",{className:`font-bold text-base ${j}`,children:[c?"Lucro:":"Prejuízo:"," R$ ",Math.abs(r).toFixed(2)]})]})]},o.nome)})}),n.length===0&&e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-muted-foreground",children:"Nenhuma parte encontrada para o filtro selecionado."})})]})]})},fa=()=>{const[l,s]=C.useState(0),[b,t]=C.useState(0),[h,g]=C.useState(0),[n,o]=C.useState(0),[r,c]=C.useState(0),[j,v]=C.useState([]),[u,N]=C.useState([]),a=C.useCallback((x,E,F)=>{const R=parseFloat(E),P=parseFloat(F);if(isNaN(R)||R<=0||isNaN(P)||P<0)return{error:"Peso Inicial e Custo Total da Carcaça são obrigatórios e devem ser maiores ou iguais a zero."};if(x.some(d=>!d.nome||isNaN(parseFloat(d.peso))||parseFloat(d.peso)<0||d.parte_boi!=="descarte"&&d.parte_animal!=="descarte"&&(isNaN(parseFloat(d.preco_venda_kg))||parseFloat(d.preco_venda_kg)<0)))return{error:"Verifique se todos os cortes têm nome, peso e preço de venda (exceto para descarte) preenchidos corretamente com valores não negativos."};let D=0;if(x.forEach(d=>{const _=parseFloat(d.peso)||0;if(!(d.parte_boi==="descarte"||d.parte_animal==="descarte")){const k=parseFloat(d.preco_venda_kg)||0;D+=_*k}}),D<=0)return{error:"A Receita Total de Venda é zero ou negativa. Não é possível calcular o rateio de custos. Verifique os preços e pesos dos cortes."};let Z=0,H=0;const K=x.map(d=>{const _=parseFloat(d.peso)||0,B=d.parte_boi==="descarte"||d.parte_animal==="descarte",k=B?0:parseFloat(d.preco_venda_kg)||0,ee=_*k,ae=D>0?ee/D:0,J=B?0:ae*P,se=_>0?J/_:0,oe=k>0?(k-se)/k*100:0;return B||(Z+=_),H+=J,{...d,id:d.id,nome:d.nome,pesoNum:_,precoVendaKgNum:k,isDescarte:B,indiceVenda:(ae*100).toFixed(2)+"%",receitaVendaCorte:ee.toFixed(2),novoCustoKg:se.toFixed(2),novoCustoTotal:J.toFixed(2),margem:oe.toFixed(2)+"%"}}),G=R>0?Z/R*100:0,X=P-H,y={};K.forEach(d=>{const _=d.parte_boi||d.parte_animal||"nao_definida";y[_]||(y[_]={nome:_,receitaTotal:0,custoTotal:0,pesoTotal:0,itens:0}),y[_].receitaTotal+=parseFloat(d.receitaVendaCorte),y[_].custoTotal+=parseFloat(d.novoCustoTotal),y[_].pesoTotal+=d.pesoNum,y[_].itens+=1});const U=Object.values(y).map(d=>({...d,lucroPrejuizo:(d.receitaTotal-d.custoTotal).toFixed(2),receitaTotal:d.receitaTotal.toFixed(2),custoTotal:d.custoTotal.toFixed(2),pesoTotal:d.pesoTotal.toFixed(2)}));return s(G.toFixed(2)),g(D.toFixed(2)),N(K),v(U),t(H.toFixed(2)),c(X.toFixed(2)),o((D-P).toFixed(2)),{success:!0}},[]);return{resultados:{rendimentoTotalCalculado:l,custoTotalAposDesossaCalculado:b,receitaTotalVendaCalculada:h,lucroTotalEstimado:n,custoTotalDescarte:r,dadosAnalisePartes:j,cortesCalculados:u},calcularResultados:a,resetCalculations:()=>{s(0),t(0),g(0),o(0),c(0),v([]),N([])}}},Q={id:Date.now(),codigo_produto:"",nome:"",peso:"",preco_venda_kg:"",parte_boi:"",parte_animal:"",rendimentoIndividual:0,receitaVendaCorte:0,indiceParticipacao:0,novoCustoKg:0,margemLucro:0},va=()=>{const{toast:l}=pe(),[s,b]=C.useState(null),[t,h]=C.useState(!1),[g,n]=C.useState(!1),[o,r]=C.useState(!1),[c,j]=C.useState("bovino"),[v,u]=C.useState(""),[N,a]=C.useState(""),[p,x]=C.useState(""),[E,F]=C.useState(""),[R,P]=C.useState([{...Q}]),[D,Z]=C.useState(""),[H,K]=C.useState(!1),[G,X]=C.useState([]),[y,U]=C.useState(null);return C.useEffect(()=>{const i=localStorage.getItem(Ge);i&&b(JSON.parse(i))},[]),{currentUser:s,isSaving:t,isSearching:g,isLoadingForm:o,tipoAnimal:c,numeroNotaFiscal:v,dataChegada:N,pesoInicialBoi:p,custoTotalCarcaça:E,cortes:R,searchTermDesossa:D,searchModalOpen:H,searchResults:G,currentDesossaId:y,setTipoAnimal:j,setNumeroNotaFiscal:u,setDataChegada:a,setPesoInicialBoi:x,setCustoTotalCarcaça:F,setCortes:P,setSearchTermDesossa:Z,setSearchModalOpen:K,resetForm:(i=!0)=>{U(null),j("bovino"),u(""),a(""),x(""),F(""),P([{...Q,id:Date.now()}]),i&&l({title:"Formulário Limpo",description:"Pronto para nova desossa."})},handleAddCorte:()=>{P([...R,{...Q,id:Date.now()}])},handleRemoveCorte:i=>{P(R.filter(f=>f.id!==i))},handleCorteChange:(i,f,m)=>{P(W=>W.map(L=>{if(L.id===i){const V={...L,[f]:m};return f==="parte_animal"?V.parte_boi=m:f==="parte_boi"&&(V.parte_animal=m),V}return L}))},handleDownloadPlanilhaModeloDesossa:()=>{const i=c==="suino"?"suino":"bovino",f=c==="suino"?"pernil":"traseiro",m=c==="suino"?"Pernil Suíno":"Picanha",W=[["codigo_produto","nome_corte","peso_kg","preco_venda_kg",`parte_${i}`],["PC001",m,2.5,79.9,f]],L=S.aoa_to_sheet(W),V=S.book_new();S.book_append_sheet(V,L,"ModeloDesossa"),Ve(V,`Modelo_Planilha_Desossa_${i}_${me}.xlsx`),l({title:"Download Iniciado",description:"Modelo de planilha baixado."})},handleFileUpload:i=>{const f=i.target.files[0];if(!f)return;const m=new FileReader;m.onload=W=>{try{const L=new Uint8Array(W.target.result),V=ta(L,{type:"array"}),Be=V.SheetNames[0],Ie=V.Sheets[Be],xe=S.sheet_to_json(Ie,{header:1});if(xe.length<2){l({title:"Erro na Planilha",description:"Planilha vazia ou formato inválido.",variant:"destructive"});return}const I=xe[0].map(A=>String(A).toLowerCase().trim()),be=["codigo_produto","nome_corte","peso_kg","preco_venda_kg"].filter(A=>!I.includes(A));if(be.length>0){l({title:"Erro de Cabeçalho",description:`Colunas obrigatórias faltando: ${be.join(", ")}.`,variant:"destructive",duration:7e3});return}const Me=c==="suino"?"suino":"bovino",ze=I.indexOf("codigo_produto"),Oe=I.indexOf("nome_corte"),qe=I.indexOf("peso_kg"),He=I.indexOf("preco_venda_kg");let Y=I.indexOf(`parte_${Me}`);Y===-1&&(Y=I.indexOf("parte_boi")),Y===-1&&(Y=I.indexOf("parte_animal"));const he=xe.slice(1).map((A,Ke)=>{const Ue=String(A[ze]||""),_e=String(A[Oe]||""),Pe=String(A[qe]||""),Te=String(A[He]||""),ge=Y!==-1?String(A[Y]||""):"";if(!_e||!Pe||!Te)return null;const We=ge==="descarte"?"0":Te;return{...Q,id:Date.now()+Ke,codigo_produto:Ue,nome:_e,peso:Pe,preco_venda_kg:We,parte_animal:ge,parte_boi:ge}}).filter(A=>A!==null);he.length>0?(P(he),l({title:"Planilha Carregada com Sucesso!",description:`${he.length} cortes importados. ${Y!==-1?"Partes do animal incluídas.":"Partes do animal não encontradas - você pode preenchê-las manualmente."}`})):l({title:"Nenhum Corte Importado",description:"Verifique se os dados estão preenchidos corretamente.",variant:"destructive"})}catch(L){l({title:"Erro ao Processar Planilha",description:`Falha ao ler arquivo: ${L.message}`,variant:"destructive"})}finally{i.target.value=null}},m.readAsArrayBuffer(f)},loadDesossaToForm:i=>{r(!0);try{if(U(i.id),j(i.tipo_animal||"bovino"),u(i.numero_nota_fiscal||""),a(i.data_chegada||""),x(String(i.peso_inicial_boi||"")),F(String(i.custo_total_carcaca||"")),i.cortes_info&&Array.isArray(i.cortes_info)){const f=i.cortes_info.map((m,W)=>({...Q,id:Date.now()+W,codigo_produto:m.codigo_produto||"",nome:m.nome||"",peso:String(m.peso||""),preco_venda_kg:String(m.preco_venda_kg||""),parte_animal:m.parte_animal||m.parte_boi||"",parte_boi:m.parte_boi||m.parte_animal||"",rendimentoIndividual:m.rendimentoIndividual||0,receitaVendaCorte:m.receitaVendaCorte||0,indiceParticipacao:m.indiceParticipacao||0,novoCustoKg:m.novoCustoKg||0,margemLucro:m.margemLucro||0}));P(f)}else P([{...Q,id:Date.now()}]);l({title:"Desossa Carregada",description:`Dados da desossa ${i.numero_nota_fiscal||i.id} carregados.`})}catch(f){l({title:"Erro ao Carregar Desossa",description:f.message,variant:"destructive"})}finally{r(!1)}},handleSaveDesossa:async()=>{if(!s||!s.id||!s.cnpj){l({title:"Erro de Autenticação",description:"Usuário não identificado.",variant:"destructive"});return}if(!v||!p||!E){l({title:"Dados Incompletos",description:"Preencha pelo menos o número da nota, peso inicial e custo total.",variant:"destructive"});return}h(!0);try{const i={user_id:s.id,cnpj_empresa:s.cnpj,numero_nota_fiscal:v,data_chegada:N||null,peso_inicial_boi:parseFloat(p),custo_total_carcaca:parseFloat(E),cortes_info:R.map(({id:f,...m})=>({...m,peso:parseFloat(m.peso)||0,preco_venda_kg:parseFloat(m.preco_venda_kg)||0})),resultados_consolidados:{}};if(y&&typeof y!="string"){const{data:f,error:m}=await je.from("desossas_registradas").update(i).eq("id",y).eq("user_id",s.id).select();if(m)throw m;l({title:"Desossa Atualizada",description:"Dados salvos com sucesso!"})}else{const{data:f,error:m}=await je.from("desossas_registradas").insert([i]).select();if(m)throw m;f&&f.length>0&&U(f[0].id),l({title:"Desossa Salva",description:"Nova desossa registrada com sucesso!"})}}catch(i){l({title:"Erro ao Salvar",description:i.message,variant:"destructive"})}finally{h(!1)}},handleSearchDesossas:async()=>{if(!s||!s.id||!s.cnpj){l({title:"Erro de Autenticação",description:"Usuário não identificado.",variant:"destructive"});return}n(!0);try{let i=je.from("desossas_registradas").select("*").eq("user_id",s.id).eq("cnpj_empresa",s.cnpj).order("created_at",{ascending:!1});D.trim()&&(D.includes("-")?i=i.eq("data_chegada",D):i=i.ilike("numero_nota_fiscal",`%${D}%`));const{data:f,error:m}=await i.limit(20);if(m)throw m;X(f||[]),K(!0),f&&f.length>0?l({title:"Busca Concluída",description:`${f.length} desossa(s) encontrada(s).`}):l({title:"Nenhum Resultado",description:"Nenhuma desossa encontrada com os critérios informados."})}catch(i){l({title:"Erro na Busca",description:i.message,variant:"destructive"})}finally{n(!1)}}}},Ca=(l,s,b)=>{const t=new oa,h=l.tipoAnimal==="suino"?"Suíno":"Bovino",g=[59,130,246],n=[55,65,81],o=[249,250,251];t.setFillColor(...g),t.rect(0,0,210,25,"F"),t.setTextColor(255,255,255),t.setFontSize(18),t.setFont("helvetica","bold"),t.text(`Relatório de Desossa - ${h}`,20,16),t.setTextColor(...n),t.setFontSize(10),t.text(`Gerado em: ${new Date().toLocaleDateString("pt-BR")} às ${new Date().toLocaleTimeString("pt-BR")}`,150,22);let r=35;t.setFontSize(14),t.setFont("helvetica","bold"),t.text("Dados da Carcaça",20,r),r+=10;const c=[["Tipo de Animal",h],["Número Nota Fiscal",l.numeroNotaFiscal||"N/A"],["Data de Chegada",l.dataChegada?new Date(l.dataChegada+"T00:00:00").toLocaleDateString("pt-BR"):"N/A"],["Peso Inicial (kg)",l.pesoInicialBoi||"N/A"],["Custo Total Carcaça (R$)",l.custoTotalCarcaça||"N/A"]];t.autoTable({startY:r,head:[["Item","Valor"]],body:c,theme:"grid",headStyles:{fillColor:g,textColor:[255,255,255]},alternateRowStyles:{fillColor:o},margin:{left:20,right:20},styles:{fontSize:10}}),r=t.lastAutoTable.finalY+15,t.setFontSize(14),t.setFont("helvetica","bold"),t.text("Detalhes dos Cortes",20,r),r+=10;const j=["Código","Nome","Peso (kg)","Preço (R$/kg)",`Parte ${h}`,"Rend. (%)","Índice (%)","Novo Custo (R$/kg)","Margem (%)"],v=b.map(a=>[a.codigo_produto||"",a.nome||"",a.peso||"",a.preco_venda_kg||"",a.parte_animal||a.parte_boi||"",a.rendimentoIndividual||"0",a.indiceParticipacao||"0",a.novoCustoKg||"0",a.margemLucro||"0"]);t.autoTable({startY:r,head:[j],body:v,theme:"grid",headStyles:{fillColor:g,textColor:[255,255,255]},alternateRowStyles:{fillColor:o},margin:{left:20,right:20},styles:{fontSize:8},columnStyles:{0:{cellWidth:15},1:{cellWidth:25},2:{cellWidth:15},3:{cellWidth:20},4:{cellWidth:20},5:{cellWidth:15},6:{cellWidth:15},7:{cellWidth:20},8:{cellWidth:15}}}),r=t.lastAutoTable.finalY+15,r>250&&(t.addPage(),r=20),t.setFontSize(14),t.setFont("helvetica","bold"),t.text("Resultados Consolidados",20,r),r+=10;const u=[["Rendimento Total (%)",s.rendimentoTotalCalculado||"0"],["Custo Total Após Desossa (R$)",s.custoTotalAposDesossaCalculado||"0"],["Receita Total Estimada (R$)",s.receitaTotalVendaCalculada||"0"],["Custo Total Descarte (R$)",s.custoTotalDescarte||"0"],["Lucro Bruto Estimado (R$)",s.lucroTotalEstimado||"0"]];if(t.autoTable({startY:r,head:[["Indicador","Valor"]],body:u,theme:"grid",headStyles:{fillColor:g,textColor:[255,255,255]},alternateRowStyles:{fillColor:o},margin:{left:20,right:20},styles:{fontSize:10}}),r=t.lastAutoTable.finalY+15,s.dadosAnalisePartes&&s.dadosAnalisePartes.length>0){r>220&&(t.addPage(),r=20),t.setFontSize(14),t.setFont("helvetica","bold"),t.text(`Análise de Lucratividade por Parte do ${h}`,20,r),r+=10;const a=[`Parte do ${h}`,"Peso (kg)","Receita (R$)","Custo (R$)","Lucro/Prejuízo (R$)"],p=s.dadosAnalisePartes.map(x=>[x.nome||"",x.pesoTotal||"0",x.receitaTotal||"0",x.custoTotal||"0",x.lucroPrejuizo||"0"]);t.autoTable({startY:r,head:[a],body:p,theme:"grid",headStyles:{fillColor:g,textColor:[255,255,255]},alternateRowStyles:{fillColor:o},margin:{left:20,right:20},styles:{fontSize:10}}),r=t.lastAutoTable.finalY+15}const N=t.internal.getNumberOfPages();for(let a=1;a<=N;a++)t.setPage(a),t.setFontSize(8),t.setTextColor(128,128,128),t.text(`${me} - Página ${a} de ${N}`,20,285),t.text(`Relatório gerado automaticamente em ${new Date().toLocaleDateString("pt-BR")}`,120,285);return t},Na=()=>{const{toast:l}=pe();return{handleExportResultadosExcel:(t,h,g,n,o,r,c)=>{if(!n&&r.length===1&&!r[0].nome){l({title:"Nada para Exportar",description:"Preencha ou calcule os dados primeiro.",variant:"default"});return}const j=S.book_new(),v=t==="suino"?"Suíno":"Bovino",u=[["Tipo de Animal",v],["Número Nota Fiscal",h||"N/A"],["Data Chegada",g?new Date(g+"T00:00:00").toLocaleDateString("pt-BR"):"N/A"],["Peso Inicial (kg)",n||"N/A"],["Custo Total Carcaça (R$)",o||"N/A"]];S.book_append_sheet(j,S.aoa_to_sheet(u),"Dados Carcaça");const N=["Cód. Produto","Nome","Peso (kg)","Preço Venda (R$/kg)",`Parte do ${v}`,"Rend. (%)","Índice Part. (%)","Novo Custo (R$/kg)","Margem (%)","Receita (R$)"],a=r.map(x=>[x.codigo_produto,x.nome,x.peso,x.preco_venda_kg,x.parte_animal||x.parte_boi,x.rendimentoIndividual,x.indiceParticipacao,x.novoCustoKg,x.margemLucro,x.receitaVendaCorte]);S.book_append_sheet(j,S.aoa_to_sheet([N,...a]),"Detalhes dos Cortes");const p=[["Item","Valor"],["Rendimento Total (%)",c.rendimentoTotalCalculado],["Custo Total Após Desossa (R$)",c.custoTotalAposDesossaCalculado],["Receita Total Estimada (R$)",c.receitaTotalVendaCalculada],["Custo Total Descarte (R$)",c.custoTotalDescarte],["Lucro Bruto Estimado (R$)",c.lucroTotalEstimado]];if(S.book_append_sheet(j,S.aoa_to_sheet(p),"Resultados Consolidados"),c.dadosAnalisePartes.length>0){const x=[`Parte do ${v}`,"Peso Total (kg)","Receita Total (R$)","Custo Total (R$)","Lucro/Prejuízo (R$)"],E=c.dadosAnalisePartes.map(F=>[F.nome,F.pesoTotal,F.receitaTotal,F.custoTotal,F.lucroPrejuizo]);S.book_append_sheet(j,S.aoa_to_sheet([x,...E]),"Análise por Parte")}Ve(j,`Resultado_Desossa_${v}_${h||"Atual"}_${me}.xlsx`),l({title:"Exportação Excel Concluída",description:"Resultados exportados em Excel."})},handleExportResultadosPDF:(t,h,g,n,o,r,c)=>{if(!n&&r.length===1&&!r[0].nome){l({title:"Nada para Exportar",description:"Preencha ou calcule os dados primeiro.",variant:"default"});return}try{const v=Ca({tipoAnimal:t,numeroNotaFiscal:h,dataChegada:g,pesoInicialBoi:n,custoTotalCarcaça:o},c,r),u=t==="suino"?"Suino":"Bovino";v.save(`Relatorio_Desossa_${u}_${h||"Atual"}_${me}.pdf`),l({title:"Exportação PDF Concluída",description:"Relatório exportado em PDF."})}catch(j){l({title:"Erro na Exportação PDF",description:j.message,variant:"destructive"})}}}},Ka=()=>{const{toast:l}=pe(),{resultados:s,calcularResultados:b,resetCalculations:t}=fa(),{handleExportResultadosExcel:h,handleExportResultadosPDF:g}=Na(),{currentUser:n,isSaving:o,isSearching:r,isLoadingForm:c,tipoAnimal:j,numeroNotaFiscal:v,dataChegada:u,pesoInicialBoi:N,custoTotalCarcaça:a,cortes:p,searchTermDesossa:x,searchModalOpen:E,searchResults:F,currentDesossaId:R,setTipoAnimal:P,setNumeroNotaFiscal:D,setDataChegada:Z,setPesoInicialBoi:H,setCustoTotalCarcaça:K,setCortes:G,setSearchTermDesossa:X,setSearchModalOpen:y,resetForm:U,handleAddCorte:d,handleRemoveCorte:_,handleCorteChange:B,handleDownloadPlanilhaModeloDesossa:k,handleFileUpload:ee,loadDesossaToForm:ae,handleSaveDesossa:J,handleSearchDesossas:se}=va(),oe=()=>{const f=b(p,N,a);f.error?l({title:"Erro no Cálculo",description:f.error,variant:"destructive"}):l({title:"Cálculo Realizado",description:"Resultados atualizados!"})};C.useEffect(()=>{s.cortesCalculados.length>0&&G(s.cortesCalculados)},[s.cortesCalculados,G]);const i=()=>{U(),t()};return c?e.jsxs("div",{className:"flex justify-center items-center h-64",children:[e.jsx(ce,{size:48}),e.jsx("p",{className:"ml-3",children:"Carregando..."})]}):e.jsxs("div",{className:"space-y-6 pb-12",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[e.jsx("h1",{className:"text-3xl font-bold text-gradient-brand",children:"Cálculos Detalhados de Desossa"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(w,{onClick:i,variant:"outline",className:"hover-lift",children:[e.jsx(da,{className:"mr-2 h-4 w-4"})," Nova"]}),e.jsxs(w,{onClick:J,disabled:o,className:"bg-green-600 hover:bg-green-700 text-white hover-lift",children:[o?e.jsx(ce,{className:"mr-2"}):e.jsx(ra,{className:"mr-2 h-4 w-4"}),R?"Atualizar":"Salvar"]}),e.jsxs(w,{onClick:()=>h(j,v,u,N,a,p,s),variant:"outline",className:"bg-teal-600 hover:bg-teal-700 text-white hover-lift",children:[e.jsx(Le,{className:"mr-2 h-4 w-4"})," Excel"]}),e.jsxs(w,{onClick:()=>g(j,v,u,N,a,p,s),variant:"outline",className:"bg-red-600 hover:bg-red-700 text-white hover-lift",children:[e.jsx(la,{className:"mr-2 h-4 w-4"})," PDF"]})]})]}),e.jsxs(M,{className:"glass-card",children:[e.jsx(z,{children:e.jsx(O,{children:"Pesquisar Desossas Lançadas"})}),e.jsxs(q,{className:"flex flex-col sm:flex-row gap-3 items-end",children:[e.jsxs("div",{className:"flex-grow",children:[e.jsx($,{htmlFor:"searchTermDesossa",children:"Nº Nota Fiscal ou Data (AAAA-MM-DD)"}),e.jsx(T,{id:"searchTermDesossa",type:"text",placeholder:"Buscar...",value:x,onChange:f=>X(f.target.value)})]}),e.jsxs(w,{onClick:se,disabled:r,className:"w-full sm:w-auto",children:[r?e.jsx(ce,{className:"mr-2"}):e.jsx(ia,{className:"mr-2 h-4 w-4"}),"Pesquisar"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(ua,{numeroNotaFiscal:v,setNumeroNotaFiscal:D,dataChegada:u,setDataChegada:Z,pesoInicialBoi:N,setPesoInicialBoi:H,custoTotalCarcaça:a,setCustoTotalCarcaça:K,tipoAnimal:j,setTipoAnimal:P}),e.jsx(ga,{onDownloadModelo:k,onFileUpload:ee})]}),e.jsxs(M,{className:"glass-card",children:[e.jsxs(z,{className:"flex flex-row items-center justify-between",children:[e.jsx(O,{children:"Detalhes dos Cortes"}),e.jsxs(w,{onClick:d,size:"sm",variant:"outline",className:"hover-lift",children:[e.jsx(na,{className:"mr-2 h-4 w-4"})," Adicionar"]})]}),e.jsxs(q,{children:[e.jsx(pa,{cortes:p,handleCorteChange:B,handleRemoveCorte:_,tipoAnimal:j}),p.length>0&&e.jsxs(w,{onClick:oe,className:"mt-6 w-full bg-primary hover:bg-primary/90 text-primary-foreground text-lg py-3 hover-lift",children:[e.jsx(Ee,{className:"mr-2 h-5 w-5"})," Calcular"]})]})]}),e.jsx(xa,{rendimentoTotal:s.rendimentoTotalCalculado,custoVerificado:s.custoTotalAposDesossaCalculado,receitaTotal:s.receitaTotalVendaCalculada,lucroEstimado:s.lucroTotalEstimado,totalDescarte:s.custoTotalDescarte}),s.dadosAnalisePartes&&s.dadosAnalisePartes.length>0&&e.jsx(ja,{dadosAnalise:s.dadosAnalisePartes}),e.jsx(ha,{open:E,setOpen:y,results:F,isLoading:r,searchTerm:x,loadDesossaToForm:ae})]})};export{Ka as default};
